<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flight</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <section class="flight-details">
        <h2>Your Flight Details</h2>
        <p><strong>Flight Number:</strong> [[${flight.flightNumber}]]</p>
        <p><strong>From:</strong> [[${flight.departure}]]</p>
        <p><strong>To:</strong> [[${flight.destination}]]</p>
        <p><strong>Departure Time:</strong> [[${#temporals.format(flight.departureTime, 'dd MMM, HH:mm')}]]</p>
        <p><strong>Arrival Time:</strong> [[${#temporals.format(flight.arrivalTime, 'dd MMM, HH:mm')}]]</p>
        <p><strong>Seat Preference:</strong> [[${preference != null ? preference : 'No preference selected'}]]</p>
    </section>

    <h2>Select Your Seats</h2>

    <form th:action="@{/flights/confirm-selection}" method="post">
        <input type="hidden" name="flightNumber" th:value="${flight.flightNumber}" />

        <table class="recommend seating-plan">
            <tbody>
            <tr th:each="row, rowIndex : ${flight.seatingPlan}">
                <td class="recommendTd" th:each="seat, seatIndex : ${row}">
                    <label>
                        <input type="checkbox" name="selectedSeats"
                               th:value="${seat}"
                               th:disabled="${seat == 'X' or seat == '|'}"
                               th:classappend="${#lists.contains(flight.recommendedSeats, seat) ? 'recommended' : ''}"
                               id="seat-${rowIndex}-${seatIndex}" />
                        <span th:text="${seat}" th:attr="for=${'seat-' + rowIndex + '-' + seatIndex}"></span>
                    </label>
                </td>
            </tr>
            </tbody>
        </table>

        <button type="submit">Confirm Selection</button>
    </form>
</body>
</html>